<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo Starter - Carregamento Condicional</title>
</head>
<body>
    <h1>Sistema Starter - Exemplo de Uso</h1>
    
    <!-- 1. PRIMEIRO: Carrega o script starter -->
    <script src="starter.js"></script>
    
    <!-- 2. DEPOIS: Define os recursos e condi√ß√µes -->
    <script>
        // Ativa debug para ver logs no console
        window.StarterDebug = true;
        
        // Define os recursos que podem ser carregados
        window.StarterResources = [
            {
                name: "Barra de Cupom",
                type: "script",
                url: "barra_cupom.js",
                condition: {
                    type: "page.pathname.contains",
                    value: "/produto"
                }
            },
            
            {
                name: "Pop-up de Desconto",
                type: "script", 
                url: "popup_desconto.js",
                condition: {
                    conditions: [
                        { type: "time.after", value: "2025-11-01 00:00:00" },
                        { type: "time.before", value: "2025-12-31 23:59:59" },
                        { type: "device.desktop" }
                    ],
                    operator: "and"
                }
            },
            
            {
                name: "Configura√ß√£o de Cupom para Mobile",
                type: "inline",
                code: `
                    window.CouponBarConfig = {
                        title: "üì± Oferta especial mobile! üì±",
                        couponCode: "MOBILE20",
                        timerEndDate: "2025-12-25 23:59:59",
                        colors: {
                            background: "#ff6b35",
                            titleColor: "#ffffff"
                        }
                    };
                `,
                condition: {
                    type: "device.mobile"
                }
            },
            
            {
                name: "Script para P√°gina de Checkout",
                type: "script",
                url: "checkout_enhancer.js",
                condition: {
                    conditions: [
                        { type: "page.pathname.contains", value: "/checkout" },
                        { type: "dom.element.exists", value: ".checkout-form" }
                    ],
                    operator: "and"
                }
            },
            
            {
                name: "CSS para Telas Grandes",
                type: "css",
                url: "styles-desktop.css",
                condition: {
                    type: "device.viewport.width.greater",
                    value: 1200
                }
            },
            
            {
                name: "Promo√ß√£o de Final de Semana",
                type: "script",
                url: "weekend_promo.js", 
                condition: {
                    conditions: [
                        { type: "time.day.of.week", value: 6 }, // S√°bado
                        { type: "time.day.of.week", value: 0 }  // Domingo
                    ],
                    operator: "or"
                }
            },
            
            {
                name: "Script para Usu√°rios Retornando",
                type: "inline",
                code: `
                    console.log("Usu√°rio retornando detectado!");
                    // C√≥digo espec√≠fico para usu√°rios que j√° visitaram
                `,
                condition: {
                    type: "storage.local.exists",
                    value: "user_visited_before"
                }
            },
            
            {
                name: "Condi√ß√£o Personalizada",
                type: "inline",
                code: `
                    alert("Esta √© uma condi√ß√£o personalizada!");
                `,
                condition: {
                    type: "custom",
                    value: function() {
                        // L√≥gica personalizada
                        return document.querySelectorAll('.produto').length > 5;
                    }
                }
            }
        ];
    </script>

    <!-- Conte√∫do da p√°gina -->
    <div style="margin-top: 50px; padding: 20px;">
        <h2>Como Funciona</h2>
        <p>O sistema starter verifica cada recurso e suas condi√ß√µes:</p>
        
        <ol>
            <li>Carrega o <code>starter.js</code></li>
            <li>Define <code>window.StarterResources</code> com os recursos</li>
            <li>O starter avalia cada condi√ß√£o automaticamente</li>
            <li>Recursos com condi√ß√µes verdadeiras s√£o carregados</li>
        </ol>

        <h3>Tipos de Condi√ß√µes Dispon√≠veis:</h3>
        
        <h4>üìÑ Condi√ß√µes de P√°gina:</h4>
        <ul>
            <li><code>page.url.contains</code> - URL cont√©m texto</li>
            <li><code>page.pathname.contains</code> - Caminho cont√©m texto</li>
            <li><code>page.hash.contains</code> - Hash cont√©m texto</li>
        </ul>

        <h4>üèóÔ∏è Condi√ß√µes de DOM:</h4>
        <ul>
            <li><code>dom.element.exists</code> - Elemento existe</li>
            <li><code>dom.element.count.greater</code> - Quantidade de elementos</li>
            <li><code>dom.element.has.class</code> - Elemento tem classe</li>
        </ul>

        <h4>‚è∞ Condi√ß√µes de Tempo:</h4>
        <ul>
            <li><code>time.after</code> - Depois de uma data</li>
            <li><code>time.before</code> - Antes de uma data</li>
            <li><code>time.between</code> - Entre duas datas</li>
            <li><code>time.day.of.week</code> - Dia da semana (0-6)</li>
        </ul>

        <h4>üì± Condi√ß√µes de Dispositivo:</h4>
        <ul>
            <li><code>device.mobile</code> - √â dispositivo m√≥vel</li>
            <li><code>device.desktop</code> - √â desktop</li>
            <li><code>device.viewport.width.greater</code> - Largura da tela</li>
        </ul>

        <h4>üíæ Condi√ß√µes de Storage:</h4>
        <ul>
            <li><code>storage.local.exists</code> - Item existe no localStorage</li>
            <li><code>storage.session.exists</code> - Item existe no sessionStorage</li>
        </ul>

        <h4>üç™ Condi√ß√µes de Cookies:</h4>
        <ul>
            <li><code>cookie.exists</code> - Cookie existe</li>
            <li><code>cookie.equals</code> - Cookie tem valor espec√≠fico</li>
        </ul>

        <p><strong>Operadores:</strong> Use <code>operator: "and"</code> ou <code>operator: "or"</code> para combinar m√∫ltiplas condi√ß√µes.</p>
    </div>

    <!-- Elementos de teste -->
    <div class="produto">Produto 1</div>
    <div class="produto">Produto 2</div>
    <div class="produto">Produto 3</div>
    <div class="produto">Produto 4</div>
    <div class="produto">Produto 5</div>
    <div class="produto">Produto 6</div>

    <script>
        // Simula que o usu√°rio j√° visitou antes
        localStorage.setItem('user_visited_before', 'true');
    </script>
</body>
</html>