<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Popup - Exemplo de Uso</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .demo-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .demo-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .demo-section p {
            margin-bottom: 15px;
            color: #666;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box strong {
            color: #667eea;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #666;
            margin: 5px 0;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
        }

        pre code {
            background: transparent;
            color: #f8f8f2;
            padding: 0;
        }

        .content {
            margin: 40px 0;
        }

        .content h3 {
            color: #333;
            margin: 30px 0 15px 0;
        }

        .content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            background: #f8f9fa;
            margin-top: 60px;
            color: #666;
        }

        #scrollProgress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            z-index: 999998;
            transition: width 0.1s ease;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="scrollProgress"></div>

    <header>
        <h1>üñºÔ∏è Image Popup</h1>
        <p>Sistema de Popups de Imagens com Regras Personaliz√°veis</p>
    </header>

    <div class="container">
        <!-- Se√ß√£o: Demonstra√ß√£o -->
        <div class="demo-section">
            <h2>üéØ Demonstra√ß√£o Interativa</h2>
            <p>Use os bot√µes abaixo para testar os diferentes popups configurados nesta p√°gina.</p>

            <div class="info-box">
                <strong>üí° Dica:</strong> Esta p√°gina est√° configurada com 3 popups diferentes:
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Welcome:</strong> Popup de boas-vindas (exibe 1x, cooldown de 1 hora)</li>
                    <li><strong>Promo√ß√£o:</strong> Popup promocional ap√≥s scroll de 500px (exibe 3x, cooldown de 12h)</li>
                    <li><strong>Newsletter:</strong> Popup de newsletter ap√≥s 10 segundos (exibe 5x, cooldown de 24h)</li>
                </ul>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="showWelcome()">
                    üëã Mostrar Welcome
                </button>
                <button class="btn btn-primary" onclick="showPromo()">
                    üéâ Mostrar Promo√ß√£o
                </button>
                <button class="btn btn-primary" onclick="showNewsletter()">
                    üìß Mostrar Newsletter
                </button>
            </div>
        </div>

        <!-- Se√ß√£o: Controles -->
        <div class="demo-section">
            <h2>üéÆ Controles</h2>
            <p>Gerencie o comportamento dos popups em tempo real.</p>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="closePopup()">
                    ‚úñÔ∏è Fechar Popup Atual
                </button>
                <button class="btn btn-success" onclick="resetAll()">
                    üîÑ Resetar Todos Dados
                </button>
                <button class="btn btn-danger" onclick="resetWelcome()">
                    üîÑ Resetar Welcome
                </button>
                <button class="btn btn-secondary" onclick="showStats()">
                    üìä Ver Estat√≠sticas
                </button>
            </div>
        </div>

        <!-- Se√ß√£o: Estat√≠sticas -->
        <div class="demo-section">
            <h2>üìä Estat√≠sticas em Tempo Real</h2>
            <div class="stats-grid" id="statsContainer">
                <!-- Estat√≠sticas ser√£o inseridas aqui via JavaScript -->
            </div>
        </div>

        <!-- Se√ß√£o: Configura√ß√£o -->
        <div class="demo-section">
            <h2>‚öôÔ∏è Configura√ß√£o Desta P√°gina</h2>
            <p>Veja o c√≥digo de configura√ß√£o usado neste exemplo:</p>

            <pre><code>window.ImagePopupConfig = {
    popups: [
        {
            id: "welcome",
            imageUrl: "https://via.placeholder.com/600x400/667eea/ffffff?text=Bem-vindo!",
            maxDisplays: 1,
            cooldownHours: 1,
            displayRule: "true",
            enabled: true
        },
        {
            id: "promocao",
            imageUrl: "https://via.placeholder.com/600x400/28a745/ffffff?text=Promo√ß√£o+50%+OFF",
            maxDisplays: 3,
            cooldownHours: 12,
            displayRule: "window.scrollY > 500",
            enabled: true
        },
        {
            id: "newsletter",
            imageUrl: "https://via.placeholder.com/600x400/dc3545/ffffff?text=Assine+Nossa+Newsletter",
            maxDisplays: 5,
            cooldownHours: 24,
            displayRule: "(Date.now() - window.pageLoadTime) > 10000",
            enabled: true
        }
    ],
    useLocalStorage: false, // Session storage para facilitar testes
    checkInterval: 1000,
    colors: {
        overlayBackground: "rgba(0, 0, 0, 0.85)",
        closeButtonBackground: "#dc3545",
        closeButtonHover: "#c82333"
    }
};</code></pre>
        </div>

        <!-- Conte√∫do para scroll -->
        <div class="content">
            <h2>üìñ Sobre o Plugin</h2>
            
            <h3>Caracter√≠sticas Principais</h3>
            <p>
                O <strong>Image Popup</strong> √© um plugin JavaScript moderno e leve que permite exibir popups de imagens
                com controle total sobre quando e como eles aparecem. Desenvolvido seguindo as melhores pr√°ticas de
                desenvolvimento web, o plugin oferece uma API completa e configura√ß√£o flex√≠vel.
            </p>

            <h3>Funcionalidades</h3>
            <p>
                ‚úÖ <strong>M√∫ltiplos Popups:</strong> Configure quantos popups quiser, cada um com suas pr√≥prias regras<br>
                ‚úÖ <strong>Regras Personaliz√°veis:</strong> Use JavaScript para definir quando cada popup deve aparecer<br>
                ‚úÖ <strong>Controle de Frequ√™ncia:</strong> Defina quantas vezes e com que intervalo os popups aparecem<br>
                ‚úÖ <strong>Persist√™ncia Configur√°vel:</strong> Escolha entre sessionStorage ou localStorage<br>
                ‚úÖ <strong>API Completa:</strong> Controle program√°tico total via JavaScript<br>
                ‚úÖ <strong>Responsivo:</strong> Funciona perfeitamente em dispositivos m√≥veis<br>
                ‚úÖ <strong>Acess√≠vel:</strong> Suporta navega√ß√£o por teclado e leitores de tela
            </p>

            <h3>Casos de Uso</h3>
            <p>
                <strong>E-commerce:</strong> Promover ofertas especiais, cupons de desconto ou produtos em destaque.<br><br>
                <strong>Blogs:</strong> Incentivar assinatura de newsletter ou download de materiais.<br><br>
                <strong>Landing Pages:</strong> Capturar aten√ß√£o com calls-to-action visuais.<br><br>
                <strong>Eventos:</strong> Divulgar eventos, webinars ou lan√ßamentos.<br><br>
                <strong>Sites Institucionais:</strong> Comunicados importantes ou avisos.
            </p>

            <h3>Performance</h3>
            <p>
                O plugin √© otimizado para n√£o impactar a performance da p√°gina. As verifica√ß√µes de regras s√£o feitas
                em intervalos configur√°veis (padr√£o: 2 segundos), e o c√≥digo √© executado de forma ass√≠ncrona para n√£o
                bloquear o carregamento da p√°gina.
            </p>

            <h3>Continue Rolando...</h3>
            <p>
                Role para baixo e observe o popup de "Promo√ß√£o" aparecer quando voc√™ passar de 500px de rolagem!
                Este √© um exemplo de como as regras de exibi√ß√£o baseadas em comportamento do usu√°rio funcionam.
            </p>

            <p style="height: 400px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%); border-radius: 12px; font-size: 1.5em; color: #667eea;">
                ‚¨áÔ∏è Continue rolando... ‚¨áÔ∏è
            </p>

            <h3>Voc√™ passou de 500px!</h3>
            <p>
                Se o popup de promo√ß√£o ainda n√£o apareceu, aguarde alguns segundos. O sistema verifica as regras
                a cada segundo (configurado via <code>checkInterval</code>). Se voc√™ j√° viu o popup 3 vezes,
                ele n√£o aparecer√° novamente at√© o cooldown expirar.
            </p>

            <p style="height: 400px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #28a74520 0%, #20c99720 100%); border-radius: 12px; font-size: 1.5em; color: #28a745;">
                ‚úÖ Popup de Promo√ß√£o deve ter aparecido!
            </p>

            <h3>Como Funciona</h3>
            <p>
                O plugin utiliza um sistema inteligente de verifica√ß√£o peri√≥dica. A cada intervalo configurado
                (padr√£o: 2 segundos), o sistema verifica todos os popups na ordem de configura√ß√£o e exibe o
                primeiro que atende a todos os crit√©rios:
            </p>
            <ul style="margin-left: 20px;">
                <li>Popup est√° habilitado (<code>enabled: true</code>)</li>
                <li>N√£o atingiu o limite de exibi√ß√µes (<code>maxDisplays</code>)</li>
                <li>Est√° fora do per√≠odo de cooldown (<code>cooldownHours</code>)</li>
                <li>A regra JavaScript retorna <code>true</code> (<code>displayRule</code>)</li>
            </ul>

            <p style="height: 300px;"></p>
        </div>
    </div>

    <footer>
        <p><strong>Image Popup Plugin</strong> - Desenvolvido seguindo as melhores pr√°ticas</p>
        <p>Documenta√ß√£o completa dispon√≠vel em <code>docs/image_popup_documentacao.md</code></p>
    </footer>

    <!-- CONFIGURA√á√ÉO DO PLUGIN -->
    <script>
        // Marca o tempo de carregamento da p√°gina para a regra de tempo
        window.pageLoadTime = Date.now();

        // Configura√ß√£o dos popups
        window.ImagePopupConfig = {
            popups: [
                {
                    id: "welcome",
                    imageUrl: "https://via.placeholder.com/600x400/667eea/ffffff?text=Bem-vindo+ao+Image+Popup!",
                    maxDisplays: 1,
                    cooldownHours: 1,
                    displayRule: "true", // Sempre tenta exibir
                    enabled: true
                },
                {
                    id: "promocao",
                    imageUrl: "https://via.placeholder.com/600x400/28a745/ffffff?text=Promocao+50%25+OFF+-+Aproveite!",
                    maxDisplays: 3,
                    cooldownHours: 12,
                    displayRule: "window.scrollY > 500", // Ap√≥s rolar 500px
                    enabled: true
                },
                {
                    id: "newsletter",
                    imageUrl: "https://via.placeholder.com/600x400/dc3545/ffffff?text=Assine+Nossa+Newsletter",
                    maxDisplays: 5,
                    cooldownHours: 24,
                    displayRule: "(Date.now() - window.pageLoadTime) > 10000", // Ap√≥s 10 segundos
                    enabled: true
                }
            ],
            useLocalStorage: false, // Usa sessionStorage para facilitar testes
            checkInterval: 1000, // Verifica a cada 1 segundo (mais r√°pido para demo)
            colors: {
                overlayBackground: "rgba(0, 0, 0, 0.85)",
                closeButtonBackground: "#dc3545",
                closeButtonHover: "#c82333"
            }
        };
    </script>

    <!-- CARREGAMENTO DO PLUGIN -->
    <script src="../resources/image_popup.js"></script>

    <!-- FUN√á√ïES DE DEMONSTRA√á√ÉO -->
    <script>
        // Fun√ß√µes para os bot√µes
        function showWelcome() {
            window.ImagePopup.forceShowPopup("welcome");
        }

        function showPromo() {
            window.ImagePopup.forceShowPopup("promocao");
        }

        function showNewsletter() {
            window.ImagePopup.forceShowPopup("newsletter");
        }

        function closePopup() {
            window.ImagePopup.close();
            alert("Popup fechado!");
        }

        function resetAll() {
            window.ImagePopup.resetPopupData();
            alert("Todos os dados foram resetados! Os popups voltar√£o a aparecer.");
            updateStats();
        }

        function resetWelcome() {
            window.ImagePopup.resetPopupData("welcome");
            alert("Dados do popup Welcome resetados!");
            updateStats();
        }

        function showStats() {
            updateStats();
            document.getElementById('statsContainer').scrollIntoView({ behavior: 'smooth' });
        }

        // Atualiza as estat√≠sticas na p√°gina
        function updateStats() {
            const statsContainer = document.getElementById('statsContainer');
            const popupIds = ['welcome', 'promocao', 'newsletter'];
            
            let html = '';
            
            popupIds.forEach(id => {
                const stats = window.ImagePopup.getPopupStats(id);
                if (stats) {
                    html += `
                        <div class="stat-card">
                            <h3>${id.charAt(0).toUpperCase() + id.slice(1)}</h3>
                            <p><strong>Exibi√ß√µes:</strong> ${stats.displayCount} / ${stats.maxDisplays === 0 ? '‚àû' : stats.maxDisplays}</p>
                            <p><strong>√öltimo fechamento:</strong> ${stats.lastClosedAt ? new Date(stats.lastClosedAt).toLocaleString('pt-BR') : 'Nunca'}</p>
                            <p><strong>Pode exibir:</strong> ${stats.canShow ? '‚úÖ Sim' : '‚ùå N√£o'}</p>
                        </div>
                    `;
                }
            });
            
            statsContainer.innerHTML = html;
        }

        // Atualiza estat√≠sticas a cada 3 segundos
        setInterval(updateStats, 3000);
        
        // Atualiza na carga inicial
        setTimeout(updateStats, 1000);

        // Barra de progresso de scroll
        window.addEventListener('scroll', function() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('scrollProgress').style.width = scrolled + '%';
        });
    </script>
</body>
</html>
